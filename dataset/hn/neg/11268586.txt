Golang: channels are not enough