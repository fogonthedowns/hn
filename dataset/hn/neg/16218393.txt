Reducing Memory Usage in Ruby